apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: kubeflow
  # Namespace.
  # Katib controller.
  # Katib CRDs.
  # Katib DB manager.
  # Katib DB postgres.
  # Katib UI.
  # Katib webhooks.
resources:
- ../../components/namespace/
- ../../components/controller/
- ../../components/crd/
- ../../components/db-manager/
- ../../components/postgres/
- ../../components/ui/
- ../../components/webhook/
images:
- name: ghcr.io/kubeflow/katib/katib-controller
  newName: ghcr.io/kubeflow/katib/katib-controller
  newTag: latest
- name: ghcr.io/kubeflow/katib/katib-db-manager
  newName: ghcr.io/kubeflow/katib/katib-db-manager
  newTag: latest
- name: ghcr.io/kubeflow/katib/katib-ui
  newName: ghcr.io/kubeflow/katib/katib-ui
  newTag: latest
configMapGenerator:
- behavior: create
  files:
  - katib-config.yaml
  name: katib-config
  options:
    disableNameSuffixHash: true
# Secret for webhooks certs.
secretGenerator:
- name: katib-webhook-cert
  options:
    disableNameSuffixHash: true
patches:
- path: ./patches/db-manager.yaml
  target:
    group: apps
    kind: Deployment
    name: katib-db-manager
    version: v1
